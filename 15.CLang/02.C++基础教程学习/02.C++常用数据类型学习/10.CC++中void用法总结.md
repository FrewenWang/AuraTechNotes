# 概述

## **void的基本解释**

void的字面意思是“无类型”，void* 则为“无类型指针”，void *可以指向任何类型的数据。

void几乎只有“注释”和限制程序的作用，定义一个void变量没有意义，不妨试着定义：

```c++
void a; 
```

这行语句编译时会出错，提示“illegal use of type ‘void’”。不过，即使void a的编译不会出错，它也没有任何实际意义。

void真正发挥的作用在于：

（1） 对函数返回的限定；
　　

（2） 对函数参数的限定。

众所周知，如果指针p1和p2的类型相同，那么我们可以直接在p1和p2间互相赋值；如果p1和p2指向不同的数据类型，则必须使用强制类型转换运算符把赋值运算符右边的指针类型转换为左边指针的类型。

例如：

```c++
float *p1; 
int *p2; 
p1 = p2; 
```

其中p1 = p2语句会编译出错，提示“’=’ : cannot convert from ‘int * ’ to ‘float *’”，必须改为：
　　

```c++
p1 = (float *)p2;
```

而void *则不同，任何类型的指针都可以直接赋值给它，无需进行强制类型转换：

```c++
void *p1; 
int *p2; 
p1 = p2; 
```

但这并不意味着，void *也可以无需强制类型转换地赋给其它类型的指针。因为“无类型”可以包容“有类型”而“有类型”则不能包容“无类型”。道理很简单，我们可以说“男人和女人都是人”，但不能说“人是男人”或者“人是女人”。下面语句编译出错：

```c++
void *p1; 
int *p2; 
p2 = p1; 

// 提示“’=’ : cannot convert from ‘void * ’ to ‘int *’”。
```



# void使用

下面给出void关键字的使用规则：

**规则一**：如果函数没有返回值，那么应声明为void类型

C语言中，凡不加返回值类型限定的函数，就会被编译器作为返回整型值处理。但是许多程序员却误以为其为void类型。例如：

```c++
add ( int a, int b ) 
{ 
　　return a + b; 
　} 

int main(int argc, char* argv[]) 
{ 
　　printf ( "2 + 3 = %d", add ( 2, 3) ); 
　} 
//程序运行的结果为输出：2 + 3 = 5
```

这说明不加返回值说明的函数的确为int函数。

林锐博士《高质量C/C++编程》中提到：“C++语言有很严格的类型安全检查，不允许上述情况（指函数不加类型声明）发生”。可是编译器并不一定这么认定，譬如在Visual C++6.0中上述add函数的编译无错也无警告且运行正确，所以不能寄希望于编译器会做严格的类型检查。

因此，为了避免混乱，在编写C/C++程序时，对于任何函数都必须一个不漏地指定其类型。如果函数没有返回值，一定要声明为void类型。这既是程序良好可读性的需要，也是编程规范性的要求。另外，加上void类型声明后，也可以发挥代码的“自注释”作用。代码的“自注释”即代码能自己注释自己。

**规则二**　　如果函数无参数,那么应声明其参数为void。

在C++语言中声明一个这样的函数：

```c++
int function(void) { 
　　return 1; 
} 
```

则进行下面的调用是不合法的：

```c++
function(2); 
```

因为在C++中，函数参数为void的意思是这个函数不接受任何参数。






# 概述



## virtualenv搭建独立的python环境

文章参考：https://www.liaoxuefeng.com/wiki/1016959663602400/1019273143120480

# Anaconda环境搭建
文章参考：https://weread.qq.com/web/reader/47432a3072021a1c4749d92kd3d322001ad3d9446802347

文章参考：https://cloud.tencent.com/developer/article/1649008

## MacOS上安装Anaconda

Anaconda3的下载地址：https://www.anaconda.com/products/individual

安装，一路Next。



## Ubuntu上安装Anaconda

我们使用清华大学的镜像源来进行安装，参考连接：https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/

下载连接：https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/?C=M&O=A

```shell
frewen@FreweniUbuntu:~/下载$ pwd
/home/frewen/下载
frewen@FreweniUbuntu:~/下载$ ls 
Anaconda3-2021.11-Linux-x86_64.sh  code_1.62.3-1637137107_amd64.deb
frewen@FreweniUbuntu:~/下载$ sh Anaconda3-2021.11-Linux-x86_64.sh 


# 一直下来到底部，阅读完安装说明，然后输入yes
Please answer 'yes' or 'no':'
>>> yes

Anaconda3 will now be installed into this location:
/home/frewen/anaconda3

  - Press ENTER to confirm the location
  - Press CTRL-C to abort the installation
  - Or specify a different location below

[/home/frewen/anaconda3] >>> 

# 下面的输出代表安装完成
installation finished.
Do you wish the installer to initialize Anaconda3
by running conda init? [yes|no]
[no] >>> yes
Anaconda3-2021.11-Linux-x86_64.sh: 489: [[: not found
no change     /home/frewen/anaconda3/condabin/conda
no change     /home/frewen/anaconda3/bin/conda
no change     /home/frewen/anaconda3/bin/conda-env
no change     /home/frewen/anaconda3/bin/activate
no change     /home/frewen/anaconda3/bin/deactivate
no change     /home/frewen/anaconda3/etc/profile.d/conda.sh
no change     /home/frewen/anaconda3/etc/fish/conf.d/conda.fish
no change     /home/frewen/anaconda3/shell/condabin/Conda.psm1
no change     /home/frewen/anaconda3/shell/condabin/conda-hook.ps1
no change     /home/frewen/anaconda3/lib/python3.9/site-packages/xontrib/conda.xsh
no change     /home/frewen/anaconda3/etc/profile.d/conda.csh
modified      /home/frewen/.bashrc

==> For changes to take effect, close and re-open your current shell. <==

If you'd prefer that conda's base environment not be activated on startup, 
   set the auto_activate_base parameter to false: 

conda config --set auto_activate_base false

Thank you for installing Anaconda3!
Anaconda3-2021.11-Linux-x86_64.sh: 516: Syntax error: "(" unexpected (expecting ")")



```

修改数据源




升级到pip最新版本

在写这篇文章的时候，Anaconda 最新绑定版本是 2020.02。在下载安装脚本之前，浏览下载页面，并且检查是否有更新的Anaconda 可用。


Ubuntu上面怎么使用Anaconda

```
conda info

conda --version           # 获取conda版本号   
conda info --envs         # 获取当前所有虚拟环境
source activate 【your_env_name】# 进入某个环境
source deactivate         # 退出当前环境
conda create --name 【new_env_name 】--clone 【old_env_name】 # 复制某个环境
conda remove --name 【your_env_name 】--all  # 删除某个环境
conda list # 查看当前环境中有哪些安装包

# conda environments:
#
base                  *  /home/gld/anaconda3
python36                 /home/gld/anaconda3/envs/python36

conda activate tensorflow

```


### Anaconda 镜像使用帮助


Anaconda 是一个用于科学计算的 Python 发行版，支持 Linux, Mac, Windows, 包含了众多流行的科学计算、数据分析的 Python 包。

Anaconda 安装包可以到 https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/ 下载。

TUNA 还提供了 Anaconda 仓库的镜像，运行以下命令:

```
// 设置国内镜像
(base) frewen@frewenUbuntu:~/下载$ conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/
(base) frewen@frewenUbuntu:~/下载$ conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/
(base) frewen@frewenUbuntu:~/下载$ conda config --set show_channel_urls yes
```

即可添加 Anaconda Python 免费仓库。

运行 conda install numpy 测试一下吧。






```
conda create -n tensorflow python=3.6


source activate tensorflow


source deactivate tensorflow
```



#### 卸载

直接删除目录~/anaconda3以及删除~/.bashrc里相应的内容即可。

# Tensorflow2.0环境搭建



## MacOS下Tensorflow2.0环境搭建



#### 使用命令行来安装Tensorflow环境


```shell
#1、创建独立的运行环境并激活
conda create -n tensorflow2-py38 python=3.8
# 激活tensorflow2-py38环境
conda activate tensorflow2-py38

#2、安装相关的软件包
# 使用conda命令进行安装
conda install numpy matplotlib PIL scikit-learn pandas

# 使用pip进行安装（推荐使用，笔者使用conda安装的时候发现有失败的情况）
<!--使用豆瓣的镜像-->
pip install numpy matplotlib Pillow scikit-learn pandas -i https://pypi.douban.com/simple
<!--使用清华的镜像-->
pip install numpy matplotlib Pillow scikit-learn pandas -i https://pypi.tuna.tsinghua.edu.cn/simple

# 3、安装Tensorflow2.0
pip install tensorflow -i https://pypi.douban.com/simple


```





## Linux下Tensorflow2.0环境搭建

### 使用Anaconda进行安装

参考文档：https://www.cnblogs.com/hongweijiang/p/14924376.html

```shell
#1、创建独立的运行环境并激活
conda create -n tensorflow2-py38 python=3.8
# 激活tensorflow2-py38环境
conda activate tensorflow2-py38

#2、安装相关的软件包
# 使用conda命令进行安装
conda install numpy matplotlib PIL scikit-learn pandas

# 使用pip进行安装（推荐使用，笔者使用conda安装的时候发现有失败的情况）
<!--使用豆瓣的镜像-->
pip install numpy matplotlib Pillow scikit-learn pandas -i https://pypi.douban.com/simple
<!--使用清华的镜像-->
pip install numpy matplotlib Pillow scikit-learn pandas -i https://pypi.tuna.tsinghua.edu.cn/simple

# 3、安装Tensorflow2.0
pip install tensorflow -i https://pypi.douban.com/simple

# 安装 Tensorflow-gpu，其中 tensorflow-gpu==2.1.0 是Tensorflow-gpu安装的版本，可自行修改版本
pip install -i  https://mirrors.ustc.edu.cn/pypi/web/simple tensorflow-gpu==2.1.0

Requirement already satisfied: idna<4,>=2.5 in ./anaconda3/lib/python3.9/site-packages (from requests<3,>=2.21.0->tensorboard~=2.6->tensorflow-gpu==2.7.0) (3.2)
Requirement already satisfied: oauthlib>=3.0.0 in ./anaconda3/lib/python3.9/site-packages (from requests-oauthlib>=0.7.0->google-auth-oauthlib<0.5,>=0.4.1->tensorboard~=2.6->tensorflow-gpu==2.7.0) (3.1.1)
Installing collected packages: tensorflow-gpu
Successfully installed tensorflow-gpu-2.7.0

```



启动Anaconda-Navigator

```shell
source ~/anaconda3/bin/activate root
anaconda-navigator

# 如是找不到，使用下列语句来安装：
$ conda install -c anaconda anaconda-navigator

# 如果还是不能启动
# 注：看是否能启动，如果不能，在安装的时候他会有写你的安装路径，请仔细看，控制台上面有写，一般来说，就是这个路径：/home/<user>/anaconda3
# 先打开配置文件并编辑。
# 然后在最底行下面输入，<user>要改成自己的，然后保存。
# 然后重新关联一下配置文件：

gedit /home/<user>/.bashrc
export PATH="/home/<user>/anaconda3/bin:$PATH"
source /home/<user>/.bashrc
```



### 使用Virtualenv进行安装

待补充



#### GPU版本配置

环境配置安装说明：https://blog.csdn.net/u014595019/article/details/53732015





### 云端配置



#### 测试Tensorflow是否安装成功

打开jupyter.

![image-20210710142601192](https://gitee.com/frewen1225/ImageUploader/raw/master/img/20210710142601.png)

如果出现上面的显示，则证明没有安装成功



如果出现下面的内容则表示安装成功

![image-20210710144523500](https://gitee.com/frewen1225/ImageUploader/raw/master/img/20210710144523.png)



### 第一个Tensorflow2.0的程序

我们写一个


```
import tensorflow as tf

hello = tf.constant('hello tf!')
# 在tensorflow1.0中恶心的session.run.在tf2.0中终于不用使用了。
# sess = tf.Session()
# print(sess.run(hello))
print(hello)

ds_tensors = tf.data.Dataset.from_tensor_slices([6,5,4,3,2,1])

import tempfile
# 
_,filename = tempfile.mkstemp()

print(filename)

# 循环打开文件
with open(filename,'w') as f:
    f.write("""
    Line1
    Line2
    Lin23
    """)
ds_file = tf.data.TextLineDataset(filename)   
```

```

```
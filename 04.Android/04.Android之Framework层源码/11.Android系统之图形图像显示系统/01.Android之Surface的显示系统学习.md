---
title: Android之Surface的显示系统学习
date: 2022-01-05 00:00:00
updated: 2022-01-05 00:00:00
tags: [Android,性能优化,性能监控]
type: [Android,性能优化,性能监控]
comments: 性能优化框架介绍
description: 页面描述
keywords: 关键字
top_img:
mathjax:
katex:
aside:
aplayer:
highlight_shrink:



---

[TOC]



文章转自：https://source.android.google.cn/devices/graphics

文章转自：https://juejin.cn/post/6944960866404007944

## 概述

Surface可以简单的理解成一块画布，在Android的Activity中，UI的显示就是通过把图形绘制在Surface对象上完成的。每个Surface对象在SurfaceFlinger中都有对应的图像层（Layer），SurfaceFlinger会把所有图像层混合在一起并输出到Framebuffer中，这样在屏幕上就看到最后合成的图像。

应用开发中很少直接使用Surface，因为每个Activity中已经创建好了各自的Surface对象，通常只有一些特殊的应用才需要在Activity之外再去创建Surface，例如照相机应用、视频播放应用。通常这些应用也是通过创建SurfaceView来使用Surface。在应用中不能直接去创建一个可用的Surface对象，或者说直接创建出来的Surface对象也没有实际的用途，因为这样创建出的Surface对象和SurfaceFlinger之间没有关联。

无论开发者使用什么渲染 API，一切内容都会渲染到 Surface 上。Surface 表示缓冲区队列中的生产方，而缓冲区队列通常会被 SurfaceFlinger 消耗。在 Android 平台上创建的每个窗口都由 Surface 提供支持。所有被渲染的可见 Surface 都被 SurfaceFlinger 合成到屏幕。

下图显示了关键组件如何协同工作：

![img](https://gitee.com/frewen1225/ImageUploader/raw/master/FreweniMacBook/202112222043491.png)
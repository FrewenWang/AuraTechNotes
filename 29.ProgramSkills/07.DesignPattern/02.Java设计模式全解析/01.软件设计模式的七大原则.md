---
title: Java设计模式中的设计原则
date: 2021-12-20 00:00:00
updated: 2021-12-05 00:00:00
tags: [设计模式,设计原则]
type: [设计模式,设计原则]
comments: 
description: 
keywords: 
top_img:
mathjax:
katex:
aside:
aplayer:
highlight_shrink:

---

[TOC]

文章参考：https://github.com/iluwatar/java-design-patterns

## 概述

在软件开发中，为了提高软件系统的可维护性和可复用性，增加软件的可扩展性和灵活性，程序员要尽量根据 7 条原则来开发程序，从而提高软件开发效率、节约软件开发成本和维护成本。我们将在下面的几节中依次来介绍这 7 条原则。

首先，我们先来看一下，到底是哪七大原则(当然也有说是六大原则，不包含合成复用原则)。
1. 单一职责原则
2. 开闭原则
3. 里氏替换原则
4. 接口隔离原则
5. 迪米特法则
6. 依赖倒置原则
7. 合成复用原则

## 1、单一职责原则

就一个类而言,应该仅有一个引起它变化的原因,如果你能想到多于一个的动机去改变一个类,那么这个类就具有多于一个的职责.应该把多于的指责分离出去,分别再创建一些类来完成每一个职责.

单一职责原则的英文名称是Single Responsibility Principle，简称是SRP。这个原则说起来很简单，就是一个接口或者类只有一个职责，或者说类和接口的设计只能有一个原因引起他变化。

这句话说起来容易，对于职责的边界划分还是很难的。每个类应该有且只有一个职责。(类不应该承担多个职责)

## 2、开闭原则

### 开闭原则的定义

开闭原则就是保证软件实体应当对扩展开放，对修改关闭。

一个软件实体应当对扩展开放,对修改关闭.说的是,在设计一个模块的时候,应当使这个模块可以在不被修改的前提下被扩展.换言之,应当可以在不必修改源代码的情况下改变这个模块的行为，在保持系统一定稳定性的基础上，对系统进行扩展。这是面向对象设计（OOD）的基石，也是最重要的原则。

开闭原则（Open Closed Principle，OCP）由勃兰特·梅耶（Bertrand Meyer）提出，他在 1988 年的著作《面向对象软件构造》（Object Oriented Software Construction）中提出：软件实体(类)应当对扩展开放，对修改关闭（Software entities should be open for extension，but closed for modification），这就是开闭原则的经典定义。


### 开闭原则的作用
开闭原则是面向对象程序设计的终极目标，它使软件实体拥有一定的适应性和灵活性的同时具备稳定性和延续性。具体来说，其作用如下。
1. 对软件测试的影响
软件遵守开闭原则的话，软件测试时只需要对扩展的代码进行测试就可以了，因为原有的测试代码仍然能够正常运行。
2. 可以提高代码的可复用性
粒度越小，被复用的可能性就越大；在面向对象的程序设计中，根据原子和抽象编程可以提高代码的可复用性。
3. 可以提高软件的可维护性
遵守开闭原则的软件，其稳定性高和延续性强，从而易于扩展和维护。

### 开闭原则的使用场景

最直接的使用场景就是：设计模式中我们需要给某些类增加功能的时候，我们需要的可能会采用装饰器模式，而非去修改这个类的实现内容来给类增加额外的功能。



## 3、里氏替换原则

### 里氏替换原则的定义

里氏替换原则（Liskov Substitution Principle，LSP）由麻省理工学院计算机科学实验室的里斯科夫（Liskov）女士在 1987 年的“面向对象技术的高峰会议”（OOPSLA）上发表的一篇文章《数据抽象和层次》（Data Abstraction and Hierarchy）里提出来的，她提出：继承必须确保超类所拥有的性质在子类中仍然成立（Inheritance should ensure that any property proved about supertype objects also holds for subtype objects）。

里氏替换原则主要阐述了有关继承的一些原则，也就是什么时候应该使用继承，什么时候不应该使用继承，以及其中蕴含的原理。里氏替换原是继承复用的基础，它反映了基类与子类之间的关系，是对开闭原则的补充，是对实现抽象化的具体步骤的规范。

### 里氏替换原则的作用
里氏替换原则的主要作用如下。
里氏替换原则是实现开闭原则的重要方式之一。
它克服了继承中重写父类造成的可复用性变差的缺点。
它是动作正确性的保证。即类的扩展不会给已有的系统引入新的错误，降低了代码出错的可能性。

### 里氏替换原则的实现方法
里氏替换原则通俗来讲就是：**子类可以扩展父类的功能，但不能改变父类原有的功能。也就是说：子类继承父类时，除添加新的方法完成新增功能外，尽量不要重写父类的方法。**

如果通过重写父类的方法来完成新的功能，这样写起来虽然简单，但是整个继承体系的可复用性会比较差，特别是运用多态比较频繁时，程序运行出错的概率会非常大。

如果程序违背了里氏替换原则，则继承类的对象在基类出现的地方会出现运行错误。这时其修正方法是：取消原来的继承关系，重新设计它们之间的关系。

关于里氏替换原则的例子，最有名的是“正方形不是长方形”。当然，生活中也有很多类似的例子，例如，企鹅、鸵鸟和几维鸟从生物学的角度来划分，它们属于鸟类；但从类的继承关系来看，由于它们不能继承“鸟”会飞的功能，所以它们不能定义成“鸟”的子类。同样，由于“气球鱼”不会游泳，所以不能定义成“鱼”的子类；“玩具炮”炸不了敌人，所以不能定义成“炮”的子类等。

### 里氏替换的使用场景

最直接的使用场景就是：设计模式中我们需要给某些类增加功能的时候，我们需要的可能会采用装饰器模式，而非去修改这个类的实现内容来给类增加额外的功能。




## 4、依赖倒置原则

### 依赖倒置原则的定义

依赖倒置原则（Dependence Inversion Principle，DIP）是 Object Mentor 公司总裁罗伯特·马丁（Robert C.Martin）于 1996 年在 C++ Report 上发表的文章。

依赖倒置原则的原始定义为：高层模块不应该依赖低层模块，两者都应该依赖其抽象；抽象不应该依赖细节，细节应该依赖抽象（High level modules shouldnot depend upon low level modules.Both should depend upon abstractions.Abstractions should not depend upon details. Details should depend upon abstractions）。其核心思想是：要面向接口编程，不要面向实现编程。

依赖倒置原则是实现开闭原则的重要途径之一，它降低了客户与实现模块之间的耦合。

由于在软件设计中，细节具有多变性，而抽象层则相对稳定，因此以抽象为基础搭建起来的架构要比以细节为基础搭建起来的架构要稳定得多。这里的抽象指的是接口或者抽象类，而细节是指具体的实现类。

使用接口或者抽象类的目的是制定好规范和契约，而不去涉及任何具体的操作，把展现细节的任务交给它们的实现类去完成。



## 5、接口隔离原则

### 接口隔离原则定义

接口隔离原则的英文名称是Interface Segregation Principle，简称是ISP。

（1）一个类对另外一个类的依赖是建立在最小的接口上。

（2）使用多个专门的接口比使用单一的总接口要好.

根据客户需要的不同,而为不同的客户端提供不同的服务是一种应当得到鼓励的做法.就像"看人下菜碟"一样,要看客人是谁,再提供不同档次的饭菜.

（3）胖接口会导致他们的客户程序之间产生不正常的并且有害的耦合关系.

当一个客户程序要求该胖接口进行一个改动时,会影响到所有其他的客户程序.因此客户程序应该仅仅依赖他们实际需要调用的方法.

说白了，接口隔离的原则就是尽可能的划分粒度更加小的接口声明。极可能的保持接口的职责单一。而不要声明功能大而全的冗杂接口。


### 接口隔离原则使用场景

 



## 6、合成/聚合复用原则

### 合成/聚合复用原则原则定义

在一个新的对象里面使用一些已有的对象,使之成为新对象的一部分;新的对象通过这些向对象的委派达到复用已有功能的目的.这个设计原则有另一个简短的表述:要尽量使用合成/聚合,尽量不要使用继承.

### 合成/聚合复用原则使用场景

最简单的一个使用场景：就是我们在使用装饰器模式的时候，我们需要给被装饰对象增加一些新的功能，我们尽量是不去进行集成此对象。而是通过装饰器对象和被装饰者对象进行聚合。然后达到给被装饰者的增加新的功能的原则。



## 7、迪米特法则（最少知道原则）

### 迪米特法则的定义

又叫做最少知识原则(Least Knowledge Principle,LKP),就是说,一个对象应当对其他对象有尽可能少的了了解.

迪米特法则最初是用来作为面向对象的系统设计风格的一种法则,与1987年秋天由Ian Holland在美国东北大学为一个叫做迪米特(Demeter)的项目设计提出的,因此叫做迪米特法则[LIEB89][LIEB86].这条法则实际上是很多著名系统,比如火星登陆软件系统,木星的欧罗巴卫星轨道飞船的软件系统的指导设计原则.
没有任何一个其他的OO设计原则象迪米特法则这样有如此之多的表述方式,如下几种:

- (1)只与你直接的朋友们通信(Only talk to your immediate friends)
- (2)不要跟"陌生人"说话(Don't talk to strangers)
- (3)每一个软件单位对其他的单位都只有最少的知识,而且局限于那些本单位密切相关的软件单位.

就是说,如果两个类不必彼此直接通信,那么这两个类就不应当发生直接的相互作用,如果其中的一个类需要调用另一个类的某一个方法的话,可以通过第三者转发这个调用。

### 迪米特法则的使用场景

中介者模式： 典型的迪米特法则的应用场景。尽量减少对象之间的耦合问题，引入中介者对象。